<div class="dashboard-container">
      <!-- Header -->
      <div class="dashboard-header">
        <h1>Welcome back! ğŸ‘‹</h1>
        <p>Here's what's happening with your neurodiverse clients today.</p>
      </div>

      <!-- Loading State -->
      @if (dashboardService.isLoading()) {
        <div class="loading-spinner">
          <mat-spinner diameter="50"></mat-spinner>
        </div>
      }

      <!-- Dashboard Content -->
      @if (dashboardService.dashboardData$(); as data) {
        <div class="dashboard-grid">
          
          <!-- Statistics Cards -->
          <div class="stats-grid">
            <mat-card class="stat-card">
              <mat-card-content>
                <div class="stat-icon total-clients">ğŸ‘¥</div>
                <h3>{{ data.stats.totalClients }}</h3>
                <p>Total Clients</p>
              </mat-card-content>
            </mat-card>

            <mat-card class="stat-card">
              <mat-card-content>
                <div class="stat-icon active-clients">âœ…</div>
                <h3>{{ data.stats.activeClients }}</h3>
                <p>Active Clients</p>
              </mat-card-content>
            </mat-card>

            <mat-card class="stat-card">
              <mat-card-content>
                <div class="stat-icon prospects">ğŸ”</div>
                <h3>{{ data.stats.prospectClients }}</h3>
                <p>Prospects</p>
              </mat-card-content>
            </mat-card>

            <mat-card class="stat-card">
              <mat-card-content>
                <div class="stat-icon score">ğŸ’</div>
                <h3>{{ data.stats.averageRelationshipScore }}%</h3>
                <p>Avg Relationship Score</p>
              </mat-card-content>
            </mat-card>
          </div>

          <!-- Neurodiversity Distribution -->
          <mat-card class="distribution-card">
            <mat-card-header>
              <mat-card-title>Neurodiversity Distribution</mat-card-title>
            </mat-card-header>
            <mat-card-content>
              <div class="distribution-chips">
                <mat-chip-set>
                  <mat-chip class="autistic-chip">
                    ğŸ§© Autistic: {{ data.stats.neurodiversityDistribution.autistic }}
                  </mat-chip>
                  <mat-chip class="adhd-chip">
                    âš¡ ADHD: {{ data.stats.neurodiversityDistribution.adhd }}
                  </mat-chip>
                  <mat-chip class="typical-chip">
                    ğŸ’¼ Typical: {{ data.stats.neurodiversityDistribution.typical }}
                  </mat-chip>
                  <mat-chip class="mixed-chip">
                    ğŸŒˆ Mixed: {{ data.stats.neurodiversityDistribution.mixed }}
                  </mat-chip>
                  <mat-chip class="unknown-chip">
                    â“ Unknown: {{ data.stats.neurodiversityDistribution.unknown }}
                  </mat-chip>
                </mat-chip-set>
              </div>
            </mat-card-content>
          </mat-card>

          <!-- Recent Activities -->
          <mat-card class="activities-card">
            <mat-card-header>
              <mat-card-title>Recent Activities</mat-card-title>
              <button mat-icon-button routerLink="/clients">
                <!-- <mat-icon>arrow_forward</mat-icon> -->
              </button>
            </mat-card-header>
            <mat-card-content>
              @if (data.recentActivities.length > 0) {
                <div class="activities-list">
                  @for (activity of data.recentActivities; track activity._id) {
                    <div class="activity-item">
                      <div class="activity-icon">
                        @switch (activity.type) {
                          @case ('email') { ğŸ“§ }
                          @case ('phone') { ğŸ“ }
                          @case ('video') { ğŸ‘¥ }
                          @default { ğŸ“ }
                        }
                      </div>
                      <div class="activity-details">
                        <strong>{{ activity.clientName }}</strong>
                        <span class="activity-summary">{{ activity.summary }}</span>
                        <small class="activity-date">{{ activity.date | date:'MMM d, h:mm a' }}</small>
                      </div>
                    </div>
                  }
                </div>
              } @else {
                <p class="no-activities">No recent activities</p>
              }
            </mat-card-content>
          </mat-card>

          <!-- Quick Actions -->
          <mat-card class="actions-card">
            <mat-card-header>
              <mat-card-title>Quick Actions</mat-card-title>
            </mat-card-header>
            <mat-card-content>
              <div class="actions-grid">
                <button mat-raised-button color="primary" routerLink="/clients" class="action-button">
                  <!-- <mat-icon>person_add</mat-icon> -->
                  Add New Client
                </button>
                <button mat-raised-button routerLink="/clients" class="action-button">
                  <!-- <mat-icon>list</mat-icon> -->
                  View All Clients
                </button>
                <button mat-raised-button class="action-button">
                  <!-- <mat-icon>analytics</mat-icon> -->
                  View Analytics
                </button>
              </div>
            </mat-card-content>
          </mat-card>

        </div>
      }
    </div>